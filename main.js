(()=>{"use strict";class e{constructor(e,t,n,i,o,c,a){this.city=e,this.weather=t,this.description=n,this.icon=i,this.temp=o,this.feelsLike=c,this.country=a}}let t=new class{async createWeather(t){let n=await this.fetchAPI(t);return new e(n.name,n.weather[0].main,n.weather[0].description,n.weather[0].icon,n.main.temp,n.main.feels_like,n.sys.country)}async fetchAPI(e,t="metric"){let n="652e61acc78edad67e8910709ea3d274";if(e.cityName)try{let i=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e.cityName}&appid=${n}&units=${t}`,{mode:"cors"});return await i.json()}catch(e){console.log("error: "),console.log(e)}else if(e.lat)try{let i=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.long}&appid=${n}&units=${t}`,{mode:"cors"}),o=await i.json();return console.log(o),o}catch(e){console.log("error: "),console.log(e)}}};navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){let t={};t.lat=e.coords.latitude,t.long=e.coords.longitude,o(t)}),(function(){o({cityName:"Montevideo"})}));const n=document.getElementById("search-button"),i=document.getElementById("search-input");async function o(e){const n=document.getElementById("temp-card");!function(e){const t=e.querySelector('[id$="card-body"]');e.querySelector('[id$="card-spinner-container"]').setAttribute("class","d-flex align-items-center"),t.style.display="none"}(n),function(e){const t=document.getElementById("temperature-text"),n=document.getElementById("weather-text"),i=document.getElementById("temp-card-image"),o=document.getElementById("city-name"),c=document.getElementById("feels-like");t.innerText="",t.innerText=Math.round(e.temp)+"°C",n.innerText="",n.innerText=e.weather,i.setAttribute("src",`design/SVG/${e.icon}.svg`),o.innerText="",o.innerText=`${e.city} (${e.country})`,c.innerText="",c.innerText=`Feels like ${Math.round(e.feelsLike)}°C`}(await t.createWeather(e)),function(e){const t=e.querySelector('[id$="card-body"]');e.querySelector('[id$="card-spinner-container"]').setAttribute("class","d-none"),t.style.display="block"}(n)}i.addEventListener("keyup",(e=>{"Enter"===e.code&&(e.preventDefault(),n.click())})),n.addEventListener("click",(function(){let e={};e.cityName=i.value,o(e)}))})();
//# sourceMappingURL=main.js.map